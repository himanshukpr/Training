<!DOCTYPE html>
<html lang="en">

<head>
  <title>Doctor's App | View Patients</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <style>
    body {
      background: #f5f6fa;
      padding-bottom: 20px;
    }

    .navbar-inverse {
      background-color: #3498db;
      border-color: #2980b9;
    }

    .navbar-inverse .navbar-brand,
    .navbar-inverse .navbar-nav>li>a {
      color: white;
    }

    .navbar-inverse .navbar-nav>.active>a,
    .navbar-inverse .navbar-nav>.active>a:focus,
    .navbar-inverse .navbar-nav>.active>a:hover {
      background-color: #2980b9;
    }
  </style>
</head>

<body style="background: #f5f6fa;">
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/home">
          <span class="glyphicon glyphicon-plus-sign"></span> Doctor's App
        </a>
      </div>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav">
          <li><a href="/home"><span class="glyphicon glyphicon-home"></span> Home</a></li>
          <li><a href="/add-patient"><span class="glyphicon glyphicon-plus"></span> Add Patients</a></li>
          <li class="active"><a href="/fetch-patients"><span class="glyphicon glyphicon-list"></span> View Patients</a>
          </li>
          <li><a href="#"><span class="glyphicon glyphicon-edit"></span> Add Consultation</a></li>
          <li><a href="#"><span class="glyphicon glyphicon-file"></span> View Consultation</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/logout"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container">


    <h2>All Patients</h2>
    <p>Total Patients: {{total}}</p>
    <div class="container mt-3">
      {% if patients %}
      <table class="table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Phone No</th>
            <th>Email</th>
            <th>Address</th>
            <th>Gender</th>
            <th>Age</th>
            <th>Options</th>
          </tr>
        </thead>
        <tbody>
          {% for patient in patients %}
          <tr>
            <td>{{patient['name']}}</td>
            <td>{{patient['phone']}}</td>
            <td>{{patient['email']}}</td>
            <td>{{patient['address']}}</td>
            <td>{{patient['gender']}}</td>
            <td>{{patient['age']}}</td>
            <td>
              <a href="/update-patient/{{patient['_id']}}"><button class="btn-success">Edit</button></a>
              <a href="/delete-patient/{{patient['_id']}}"><button class="btn-primary">Delete</button></a>
              <button class="btn-success">Consultation</button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <div class="alert alert-danger">
        <strong>Error!</strong> No patients found. Please add patients first.
      </div>
      {% endif %}
    </div>

  </div>
  </div>

</body>

</html>